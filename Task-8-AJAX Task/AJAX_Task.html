<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToDo</title>
</head>
<body>

<h1>ToDo</h1>

<div id="data-container">
    <button onclick="fetchData()">Fetch Data</button>
    <br>
    <h3>Update status</h3>
    <form id="updateForm">
        <label for="todoId">ID:</label><br>
        <input type="text" id="todoId" name="todoId"><br>
        <label for="completed">Completed:</label><br>
        <select id="completed" name="completed">
            <option value="true">True</option>
            <option value="false">False</option>
        </select><br>
        <input type="button" value="Update Todo" onclick="updateTodo(todoId.value,completed.value)">
    </form>
    
    
    
    <p id="result"></p>


</div>

<script>
    function fetchData() {        
        var xhr = new XMLHttpRequest();// Create a new XMLHttpRequest object        
        xhr.open('GET', 'https://jsonplaceholder.typicode.com/todos/1', true);// Configure it: GET-request, the URL, asynchronous
        xhr.onreadystatechange = function () {
        // Set up a callback function to handle the response
            if (xhr.readyState === 4 && xhr.status === 200) {
                // Parse the JSON response
                var responseData = JSON.parse(xhr.responseText);
                // Display the result
                document.getElementById('result').innerHTML = 'UserID: ' + responseData.userId + '<br>Title: ' + responseData.title + '<br>Completed:' + responseData.completed;
            }
        };
        // Send the request
        xhr.send();
    }


    //updating
    function updateTodo(todoId, updatedCompleted) {
    // Create a new XMLHttpRequest object
    var xhttp = new XMLHttpRequest();

    // Define the request method and URL for updating a todo
    xhttp.open("PUT", "https://jsonplaceholder.typicode.com/todos/" + todoId, true);

    // Set up a callback function to handle the response
    xhttp.onreadystatechange = function() {
        if (this.readyState === 4) {
            if (this.status === 200) {
                // Parse the JSON response
                var data = JSON.parse(this.responseText);

                // Display the result
                document.getElementById("result").innerHTML =
                    "Updated Todo ID: " + data.id + "<br>" +
                    "Completed: " + data.completed;
            } else {
                document.getElementById("result").innerHTML =
                    "Failed to update todo. Status: " + this.status;
            }
        }
    };

    // Set the content type for a PUT request
    xhttp.setRequestHeader("Content-type", "application/json");

    // Create a JSON payload for updating a todo
    var updatedTodo = {
        completed: updatedCompleted
    };

    // Send the PUT request with the JSON payload
    xhttp.send(JSON.stringify(updatedTodo));
}
</script>
</body>
</html>

